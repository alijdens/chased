<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Chased</title>
		<style>
			body { margin: 0; }
			canvas { display: block; }
		</style>
	</head>
	<body>
		<canvas id="canvas"></canvas>

		<script src="game.js"></script>
		<script src="Vector2.js"></script>
		<script src="heap.js"></script>
		<script src="sprites.js"></script>
		<script src="map.js"></script>
		<script src="map_selector.js"></script>
		<script src="renderer.js"></script>
		<script src="keyboard.js"></script>
		<script src="player.js"></script>
		<script src="keyboard.js"></script>
		<script src="components.js"></script>
		<script src="entity_manager.js"></script>
		<script src="system_manager.js"></script>
		<script src="robot_move_component.js"></script>
		<script src="robot_move_system.js"></script>
		<script src="human_control_component.js"></script>
		<script src="physics_component.js"></script>
		<script src="physics_system.js"></script>
		<script src="sprite_component.js"></script>
		<script src="sprite_system.js"></script>
		<script src="collision_component.js"></script>
		<script src="collision_system.js"></script>
		<script src="orb_collector_system.js"></script>
		<script src="ai_straight_chase_system.js"></script>
		<script src="point_at_system.js"></script>
		<script src="orbs.js"></script>
		<script src="chaser.js"></script>
		<script src="ai.js"></script>

		<script type="text/javascript">
			"use strict";

			function canvas_resize() {
				const canvas = document.getElementById('canvas');
				canvas.width = window.innerWidth;
				canvas.height = window.innerHeight;
			}
			
			window.onload = function() {
				// loads the assets
				var img = new Image();
				img.src = '/assets.png';

				const canvas = document.getElementById('canvas');
				const ctx = canvas.getContext('2d');

				// use the whole screen
				canvas.width = window.innerWidth;
				canvas.height = window.innerHeight;

				window.addEventListener('resize', canvas_resize, false);
				window.addEventListener('orientationchange', canvas_resize, false);

				var renderer = new Renderer(ctx);
				const map = map_selector_get_current();
				
				// waits until the assets are loaded
				img.addEventListener('load', function() {
					sprites_load(img);
					game_start(renderer, map);
				}, false);
			}
		</script>
	</body>
</html>
